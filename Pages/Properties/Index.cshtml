@page
@model RealEstateWeb.Pages.Properties.IndexModel
@{
}

<h2>Propriétés</h2>

<a asp-page="Create" class="btn btn-success mb-2">Nouvelle propriété</a>

@if (!Model.Properties.Any())
{
    <p>Aucune propriété enregistrée.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Adresse</th>
                <th>Ville</th>
                <th>Type</th>
                <th>Annonces</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var property in Model.Properties)
            {
                <tr>
                    <td>@property.AddressLine</td>
                    <td>@property.City</td>
                    <td>@property.PropertyType.Description</td>
                    <td>@property.Listings.Count</td>
                    <td>
                        <a asp-page="Details" asp-route-id="@property.Id"
                           class="btn btn-sm btn-primary">
                            Détails
                        </a>
                        @if (User.Identity?.IsAuthenticated == true && User.HasClaim("OwnerProfile", "true"))
                        {


                            <a asp-page="Edit" asp-route-id="@property.Id"
                               class="btn btn-sm btn-warning">
                                Modifier
                            </a>

                            <a asp-page="Delete" asp-route-id="@property.Id"
                               class="btn btn-sm btn-danger">
                                Supprimer
                            </a>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
}